'{\n
  \'assumptions\': [\n
    \'KPI จะถูกติดตามอย่างต่อเนื่องและมีการปรับเปลี่ยนได้ตามความจำเป็น\',\n
    \'ผลลัพธ์จาก KPI จะถูกใช้ในการประเมินการทำงานของพนักงานในรอบการประเมินตามระยะเวลาที่กำหนด\'\n
  ],\n


  \'level1_groups\': [\n
    {\n


      \'group_code\': \'G-001\',\n
      \'group_title\': \'Delivery Performance\',\n
      \'group_goal\': \'ส่งมอบงานตรงเวลาและตาม scope\',\n
      \'level2_kpis\': [\n
        {\n
          \'kpi_code\': \'KPI-001\',\n
          \'title\': \'Sprint Completion Rate\',\n
          \'description\': \'อัตราส่วนของ user stories ที่เสร็จสมบูรณ์ภายใน sprint\',\n
          \'kpi_type\': \'quantitative\',\n
          \'timeframe\': \'monthly\',\n
          \'data_sources\': [\'Jira\'],\n
          \'why_it_matters\': \'ช่วยให้ทราบถึงความสามารถในการส่งมอบงานตามกำหนดเวลา\'\n
        },\n
        {\n
          \'kpi_code\': \'KPI-002\',\n
          \'title\': \'Average Story Points Completed\',\n
          \'description\': \'ค่าเฉลี่ยของ story points ที่ทำได้ในแต่ละ sprint\',\n
          \'kpi_type\': \'quantitative\',\n
          \'timeframe\': \'monthly\',\n
          \'data_sources\': [\'Jira\'],\n
          \'why_it_matters\': \'สามารถใช้วัดประสิทธิภาพการทำงานและการวางแผนในอนาคต\'\n
        }\n
      ]\n
    },\n
    {\n


      \'group_code\': \'G-002\',\n
      \'group_title\': \'Quality Assurance\',\n
      \'group_goal\': \'ลด defect/incident ที่เกิดหลัง deploy\',\n
      \'level2_kpis\': [\n
        {\n
          \'kpi_code\': \'KPI-003\',\n
          \'title\': \'Post-Deployment Incident Rate\',\n
          \'description\': \'จำนวน incident ที่เกิดขึ้นหลังการ deploy ไปยัง production\',\n
          \'kpi_type\': \'quantitative\',\n
          \'timeframe\': \'monthly\',\n
          \'data_sources\': [\'Monitoring\'],\n
          \'why_it_matters\': \'ลด incident ส่งผลต่อความเชื่อมั่นของผู้ใช้และความเสถียรของระบบ\'\n
        },\n
        {\n
          \'kpi_code\': \'KPI-004\',\n
          \'title\': \'Bug Fix Rate\',\n
          \'description\': \'อัตราการแก้ไข bug ที่พบใน production\',\n
          \'kpi_type\': \'quantitative\',\n
          \'timeframe\': \'monthly\',\n
          \'data_sources\': [\'Jira\'],\n
          \'why_it_matters\': \'ช่วยลดปัญหาที่เกิดจาก bug และส่งเสริมการใช้งานที่ดีขึ้น\'\n
        }\n
      ]\n
    },\n
    {\n


      \'group_code\': \'G-003\',\n
      \'group_title\': \'Code Quality and Efficiency\',\n
      \'group_goal\': \'คุณภาพโค้ดดีขึ้นและลดงานแก้ซ้ำ\',\n
      \'level2_kpis\': [\n
        {\n
          \'kpi_code\': \'KPI-005\',\n
          \'title\': \'Code Review Efficiency\',\n
          \'description\': \'เวลาเฉลี่ยในการ review pull requests\',\n
          \'kpi_type\': \'quantitative\',\n
          \'timeframe\': \'monthly\',\n
          \'data_sources\': [\'GitHub\'],\n
          \'why_it_matters\': \'การเร่งเวลาใน review ช่วยเพิ่มประสิทธิภาพในกระบวนการพัฒนา\'\n
        },\n
        {\n
          \'kpi_code\': \'KPI-006\',\n
          \'title\': \'Code Quality Index\',\n
          \'description\': \'คะแนนคุณภาพของโค้ดตามการวิเคราะห์โดยเครื่องมืออัตโนมัติ\',\n
          \'kpi_type\': \'qualitative\',\n
          \'timeframe\': \'monthly\',\n
          \'data_sources\': [\'GitHub\'],\n
          \'why_it_matters\': \'การมีคุณภาพโค้ดที่ดีช่วยลดความจำเป็นในการแก้ไขซ้ำ\'\n
        },\n
        {\n
          \'kpi_code\': \'KPI-007\',\n
          \'title\': \'Deployment Frequency\',\n
          \'description\': \'จำนวนครั้งที่มีการ deploy code ในช่วงเวลาที่กำหนด\',\n
          \'kpi_type\': \'quantitative\',\n
          \'timeframe\': \'monthly\',\n
          \'data_sources\': [\'CICD\'],\n
          \'why_it_matters\': \'การ deploy อย่างต่อเนื่องช่วยเพิ่มการตอบสนองทางธุรกิจและกำหนดเวลาในการพัฒนา\'\n
        }\n
      ]\n
    }\n
  ]\n
}'

-----------------------------------------------------------------------------------------
; Prompt
{
    "model": "gpt-4o-mini",
         "messages": [
    {
      "role": "system",
      "content": "คุณเป็นผู้เชี่ยวชาญด้านการออกแบบ KPI องค์กร หน้าที่ของคุณคือออกแบบ KPI ให้เหมาะกับตำแหน่งงานและวัดผลได้จริง ตอบเป็น JSON เท่านั้นตาม schema ที่กำหนด ห้ามมีข้อความอื่นนอก JSON ห้ามใช้ markdown/code fence"
    },
    {
      "role": "user",
      "content": "บริบทผู้ใช้งาน (ใช้เพื่อออกแบบ KPI):\n- ตำแหน่งงาน: Software Engineer (Backend)\n- ระดับ: Mid-level\n- แผนก: IT / Engineering\n- รายละเอียดงานหลัก:\n  1) พัฒนาและดูแลระบบ backend API\n  2) แก้ bug และลด incident ใน production\n  3) ปรับปรุง performance และความเสถียร\n  4) ทำงานร่วมกับทีม product/frontend และส่งมอบงานตาม sprint\n- เป้าหมายทีม/องค์กรที่เกี่ยวข้อง:\n  - ส่งมอบงานตรงเวลาและตาม scope\n  - ลด defect/incident ที่เกิดหลัง deploy\n  - คุณภาพโค้ดดีขึ้นและลดงานแก้ซ้ำ\n- แหล่งข้อมูลที่ วัดได้จริง (ต้องใช้สิ่งเหล่านี้เท่านั้น):\n  - Jira (issue, sprint, cycle time, story points)\n  - GitHub (PR, review, lead time)\n  - Monitoring/Logging (error rate, uptime, incident count)\n  - CI/CD (deploy frequency, pipeline success rate)\n\nงานที่ต้องทำ:\n1) แนะนำ KPI ในรูปแบบ 2 ระดับ\n   - ระดับที่ 1 = หมวดเป้าหมาย (3 หมวด)\n   - ระดับที่ 2 = KPI รายข้อภายใต้หมวดนั้น\n2) จำนวน KPI ระดับที่ 2 รวมทั้งหมด 6–8 ข้อ\n3) KPI ทุกข้อต้อง:\n   - วัดได้จริงจากแหล่งข้อมูลที่ระบุด้านบน\n   - เป็น KPI ระดับบุคคล (Individual KPI) ไม่ใช่ KPI ทั้งทีมล้วนๆ\n   - ไม่ซ้ำกัน และครอบคลุมทั้ง output/outcome/quality/efficiency อย่างสมดุล\n4) ถ้าต้องสมมติ (assumption) ให้ใส่สั้น ๆ ใน field assumptions\n\nข้อกำหนดการตอบ:\n- ตอบเป็น JSON เท่านั้น\n- ต้องตรง schema ด้านล่างแบบเคร่งครัด (ห้ามมี key เกิน/ขาด)\n- ห้ามมีข้อความอื่นนอก JSON\n- ถ้าทำตามไม่ได้ ให้ตอบ {} เท่านั้น\n\nschema (ต้องใช้ key ตามนี้เท่านั้น):\n{\n  'assumptions': ['string'],\n  'level1_groups': [\n    {\n      'group_code': 'string',\n      'group_title': 'string',\n      'group_goal': 'string',\n      'level2_kpis': [\n        {\n          'kpi_code': 'string',\n          'title': 'string',\n          'description': 'string',\n          'kpi_type': 'quantitative | qualitative | custom',\n          'timeframe': 'weekly | monthly | quarterly',\n          'data_sources': ['Jira | GitHub | Monitoring | CICD'],\n          'why_it_matters': 'string'\n        }\n      ]\n    }\n  ]\n}\n\nหมายเหตุ:\n- group_code แนะนำให้เป็น G-001, G-002, ...\n- kpi_code แนะนำให้เป็น KPI-001, KPI-002, ... และต้องไม่ซ้ำกัน\n- data_sources เลือกได้หลายค่าใน 1 KPI (เช่น ['Jira','GitHub'])\n\nเริ่มตอบได้เลย"
    }
        ]
}

\'kpi_code\': \'KPI-xxx\',\n
          \'title\': \'xxx\',\n
          \'description\': \'xxx\',\n
          \'kpi_type\': \'xxx\',\n
          \'timeframe\': \'xxx\',\n
          \'data_sources\': [\'xxx\'],\n
          \'why_it_matters\': \'xxx\'\n